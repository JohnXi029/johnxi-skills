# Agent Skill 深度解析最佳实践

本规范定义了 `skill-lens` 在分析一个 Agent Skill 时应遵循的最高标准。一份高质量的分析报告必须超越简单的文件罗列，深入到“技术实现”与“知识逻辑”的底层。

## 1. 技术栈与逻辑审计 (Technical Audit)

对于 `scripts/` 下的代码，分析应聚焦于“技术指纹”而非行数：

- **核心依赖识别**：
    - 区分“引擎依赖”（如 `langchain`, `pydantic`, `transformers`）与“工具依赖”（如 `rich`, `typer`, `yaml`）。
    - 解释核心依赖在 Skill 中的角色。
- **技术原理简述**：
    - 描述算法类型（如：基于向量检索 RAG、基于规则的正则匹配、基于 AST 的代码分析）。
    - 识别运行模式（如：异步 I/O、递归处理、交互式 CLI）。
- **资源与安全边界**：
    - 明确脚本是否涉及网络请求、磁盘写操作、环境变量读取或敏感 API 调用。
- **多语言兼容**：
    - 能够识别 Python (`.py`), Node.js (`.js`, `.ts`), Shell (`.sh`) 的典型技术栈。

## 2. 要点解析与知识提炼 (Key Points Analysis)

这是 Skill 学习的核心，要求分文件/脚本进行深度挖掘。**所有推论必须“言而有据”**：

- **脚本类文件**：
    - **技术实现**：分析其核心依赖的作用及代码实现的精妙之处。
    - **运行逻辑**：描述数据流向与异常处理机制。
- **文档类文件 (SKILL.md/References)**：
    - **设计思路**：作者为什么这样设计？解决了什么痛点？
    - **思维框架 (Mental Models)**：识别其背后的思维范式（如：`CoT`, `First-Principles`），必须引用关键片段作为证据。
    - **知识资产**：提炼该文件沉淀的领域知识或 Prompt 设计技巧。

## 3. 总结与应用 (Conclusion & Usage)

- **亮点提炼**：不仅是功能，更应关注“设计美感”或“逻辑严密性”。
- **边界约束**：基于指令中的“约束”和脚本中的“判断逻辑”，明确技能的适用范围。
- **落地引导**：报告末尾必须提供清晰的“【开始使用】”示例，降低用户的上手成本。

## 4. 流程可视化 (Workflow Visualization)

对于复杂的逻辑，必须提供直观的图示：

- **Mermaid 流程图**：使用 `graph TD` 描绘脚本的逻辑分支或 Agent 的决策链路。
- **状态机/时序图**：如果涉及多步交互，需展示状态流转或消息时序。

## 5. 报告结构规范 (必须严格遵守)

报告应按以下结构排列：

1.  **深度洞察摘要 (Executive Summary)**：精炼总结核心价值。
2.  **文件清单 (File Manifest)**：使用树状结构，并包含每个文件的简要介绍。
3.  **技术栈与工作流分析 (Technical & Workflow)**：包含核心依赖说明及 Mermaid 可视化图表。
4.  **要点解析 (Key Points)**：分文件深度挖掘。**文档类解析必须引用原句作为证据**。
5.  **总结 (Conclusion)**：
    - **5.1 亮点**：设计精妙之处。
    - **5.2 边界约束**：适用范围与限制。
    - **5.3 改进建议 (可选)**：针对性的优化方案。
